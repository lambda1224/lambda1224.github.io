<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            min-height: 100vh;
            background: #1b2a3f;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', 'Segoe WP', 'Helvetica Neue', sans-serif;
            padding: 20px;
        }

        .calculator {
            width: 340px;
            background: #f0f0f0;
            border: 2px solid #7a7a7a;
            border-radius: 0;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
        }

        /* Заголовок */
        .title-bar {
            background: #e3e3e3;
            padding: 5px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #a0a0a0;
            font-size: 14px;
        }

        .title-left {
            display: flex;
            gap: 15px;
        }

        .title-left span {
            color: #1e1e1e;
        }

        .title-right {
            display: flex;
            gap: 12px;
        }

        .title-right span {
            color: #1e1e1e;
            cursor: default;
            font-size: 16px;
            line-height: 1;
        }

        /* Дисплей */
        .display {
            background: #d4d4d4;
            padding: 12px 10px;
            text-align: right;
            border-bottom: 2px solid #a0a0a0;
            min-height: 70px;
        }

        .history-line {
            color: #2d2d2d;
            font-size: 14px;
            min-height: 20px;
        }

        .main-line {
            color: #000;
            font-size: 36px;
            font-weight: 300;
            border: none;
            outline: none;
            background: transparent;
            width: 100%;
            text-align: right;
        }

        /* Кнопки */
        .buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            background: #c0c0c0;
            gap: 2px;
            padding: 2px;
        }

        .btn {
            background: #e3e3e3;
            border: none;
            padding: 15px 0;
            font-size: 18px;
            font-weight: 400;
            color: #1e1e1e;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 45px;
            box-shadow: inset 1px 1px 2px rgba(255,255,255,0.8), inset -1px -1px 2px rgba(0,0,0,0.2);
        }

        /* Цвета кнопок как на фото */
        .btn-memory {
            background: #d1d1d1;
            font-weight: 500;
        }

        .btn-operator {
            background: #d1d1d1;
            font-size: 20px;
        }

        .btn-number {
            background: #e3e3e3;
        }

        .btn-equals {
            background: #4a8fe0;
            color: white;
            font-size: 24px;
            grid-row: span 2;
            box-shadow: inset 1px 1px 2px rgba(255,255,255,0.4), inset -1px -1px 2px rgba(0,0,0,0.3);
        }

        .btn-zero {
            grid-column: span 2;
        }

        .btn:active {
            background: #b5b5b5;
            box-shadow: inset 1px 1px 2px rgba(0,0,0,0.2), inset -1px -1px 2px rgba(255,255,255,0.8);
        }

        .btn-equals:active {
            background: #2d6fc0;
        }

        /* Нижняя строка */
        .bottom-bar {
            background: #e3e3e3;
            padding: 5px 8px;
            display: flex;
            gap: 15px;
            border-top: 2px solid #a0a0a0;
            font-size: 13px;
            color: #1e1e1e;
        }

        .bottom-left {
            display: flex;
            gap: 15px;
        }

        .bottom-right {
            margin-left: auto;
        }

        /* Для отображения знаков */
        .material-symbols-outlined {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <!-- Верхняя панель -->
        <div class="title-bar">
            <div class="title-left">
                <span>Стандартный</span>
                <span>Инженерный</span>
                <span>Преобразователь</span>
            </div>
            <div class="title-right">
                <span>−</span>
                <span>□</span>
                <span>✕</span>
            </div>
        </div>

        <!-- Дисплей -->
        <div class="display">
            <div class="history-line" id="history"></div>
            <input type="text" class="main-line" id="display" value="0" readonly>
        </div>

        <!-- Кнопки -->
        <div class="buttons">
            <!-- Ряд 1 -->
            <button class="btn btn-memory" onclick="memory('M')">M</button>
            <button class="btn btn-memory" onclick="clearEntry()">CE</button>
            <button class="btn btn-memory" onclick="clearAll()">C</button>
            <button class="btn btn-memory" onclick="backspace()">⌫</button>
            <button class="btn btn-operator" onclick="operator('/')">÷</button>

            <!-- Ряд 2 -->
            <button class="btn btn-operator" onclick="plusMinus()">±</button>
            <button class="btn btn-number" onclick="number('7')">7</button>
            <button class="btn btn-number" onclick="number('8')">8</button>
            <button class="btn btn-number" onclick="number('9')">9</button>
            <button class="btn btn-operator" onclick="operator('*')">×</button>

            <!-- Ряд 3 -->
            <button class="btn btn-operator" onclick="sqrt()">√</button>
            <button class="btn btn-number" onclick="number('4')">4</button>
            <button class="btn btn-number" onclick="number('5')">5</button>
            <button class="btn btn-number" onclick="number('6')">6</button>
            <button class="btn btn-operator" onclick="operator('-')">−</button>

            <!-- Ряд 4 -->
            <button class="btn btn-operator" onclick="percent()">%</button>
            <button class="btn btn-number" onclick="number('1')">1</button>
            <button class="btn btn-number" onclick="number('2')">2</button>
            <button class="btn btn-number" onclick="number('3')">3</button>
            <button class="btn btn-operator" onclick="operator('+')">+</button>

            <!-- Ряд 5 -->
            <button class="btn btn-operator" onclick="reciprocal()">1/x</button>
            <button class="btn btn-number btn-zero" onclick="number('0')" style="grid-column: span 2;">0</button>
            <button class="btn btn-number" onclick="decimal()">,</button>
            <button class="btn btn-equals" onclick="calculate()" style="grid-row: span 2;">=</button>
        </div>

        <!-- Нижняя панель -->
        <div class="bottom-bar">
            <div class="bottom-left">
                <span>M</span>
                <span>Inv</span>
                <span>Hyp</span>
            </div>
            <div class="bottom-right">
                <span>○</span>
            </div>
        </div>
    </div>

    <script>
        let current = '0';
        let previous = '';
        let op = null;
        let resetNext = false;
        let historyLine = '';

        function updateDisplay() {
            document.getElementById('display').value = current;
            document.getElementById('history').textContent = historyLine;
        }

        function number(num) {
            if (resetNext) {
                current = '';
                resetNext = false;
            }
            if (current === '0' && num !== '.') {
                current = num;
            } else {
                current += num;
            }
            updateDisplay();
        }

        function decimal() {
            if (resetNext) {
                current = '0';
                resetNext = false;
            }
            if (!current.includes('.')) {
                current += '.';
            }
            updateDisplay();
        }

        function operator(opSymbol) {
            if (op !== null && !resetNext) {
                calculate();
            }
            previous = current;
            op = opSymbol;
            historyLine = previous + ' ' + getSymbol(opSymbol);
            resetNext = true;
            updateDisplay();
        }

        function getSymbol(s) {
            switch(s) {
                case '+': return '+';
                case '-': return '−';
                case '*': return '×';
                case '/': return '÷';
                default: return s;
            }
        }

        function calculate() {
            if (op === null || resetNext) return;
            
            let prev = parseFloat(previous);
            let curr = parseFloat(current);
            let result;
            
            switch(op) {
                case '+': result = prev + curr; break;
                case '-': result = prev - curr; break;
                case '*': result = prev * curr; break;
                case '/': result = prev / curr; break;
                default: return;
            }
            
            historyLine = previous + ' ' + getSymbol(op) + ' ' + curr + ' =';
            current = result.toString();
            op = null;
            resetNext = true;
            updateDisplay();
        }

        function clearAll() {
            current = '0';
            previous = '';
            op = null;
            historyLine = '';
            resetNext = false;
            updateDisplay();
        }

        function clearEntry() {
            current = '0';
            updateDisplay();
        }

        function backspace() {
            if (current.length > 1) {
                current = current.slice(0, -1);
            } else {
                current = '0';
            }
            updateDisplay();
        }

        function plusMinus() {
            current = (parseFloat(current) * -1).toString();
            updateDisplay();
        }

        function sqrt() {
            current = Math.sqrt(parseFloat(current)).toString();
            historyLine = '√(' + current + ')';
            resetNext = true;
            updateDisplay();
        }

        function percent() {
            current = (parseFloat(current) / 100).toString();
            updateDisplay();
        }

        function reciprocal() {
            let val = parseFloat(current);
            if (val === 0) {
                current = 'Ошибка';
            } else {
                current = (1 / val).toString();
            }
            historyLine = '1/(' + current + ')';
            resetNext = true;
            updateDisplay();
        }

        function memory(m) {
            console.log('Memory:', m);
        }

        updateDisplay();
    </script>
</body>
</html>
